version: "3.2"

services:
  rabbitmq:
    image: rabbitmq:3-management
    restart: unless-stopped
    ports:
      - 5672:5672/tcp   # connection
      - 15672:15672/tcp  # management
    volumes:
      - rabbitmq:/var/lib/rabbitmq
    hostname: rabbit
    # Uncomment when first run, to seed the default user,
    # then comment back out to avoid credential exposure.
    #env_file: ./.config/rabbitmq.env

  matrix-sender:
    image: gbenson/hive-matrix-connector
    restart: unless-stopped
    volumes:
      - matrix_sender:/var/lib/matrix
    command:
      - sleep
      - infinity

  matrix-receiver:
    image: gbenson/hive-matrix-connector
    restart: unless-stopped
    volumes:
      - matrix_receiver:/var/lib/matrix
    command:
      - sleep
      - infinity

volumes:
  matrix_sender:
  matrix_receiver:
  rabbitmq:
